{"version":3,"sources":["../src/plugins/overlap.js","../.tmp/generated/plugins/overlap/html2js.js"],"names":[],"mappings":"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","file":"angular-gantt-overlap-plugin.js","sourcesContent":["(function(){\r\n    'use strict';\r\n    angular.module('gantt.overlap', ['gantt', 'gantt.overlap.templates']).directive('ganttOverlap', ['moment',function(moment) {\r\n        return {\r\n            restrict: 'E',\r\n            require: '^gantt',\r\n            scope: {\r\n                enabled: '=?'\r\n                // Add other option attributes for this plugin\r\n            },\r\n            link: function(scope, element, attrs, ganttCtrl) {\r\n                var api = ganttCtrl.gantt.api;\r\n\r\n                if (scope.enabled === undefined) {\r\n                    scope.enabled = true;\r\n                }\r\n\r\n                if (scope.enabled){\r\n                    api.tasks.on.change(scope, function (task) {\r\n                        // on every task change check for overlaps\r\n                        scope.handleOverlaps(task);\r\n                    });\r\n                }\r\n\r\n                var overlapsTasks = {};\r\n\r\n                scope.handleOverlaps = function (changedTask) {\r\n                    // Get all the tasks in the row.\r\n                    var allTasks = changedTask.row.tasks;\r\n\r\n                    var newOverlapsTasks = {};\r\n                    var removedOverlapsTasks = {};\r\n\r\n                    angular.forEach(allTasks, function(task) {\r\n                        removedOverlapsTasks[task.model.id] = task;\r\n                    });\r\n\r\n                    // set overlaps flag to each task that overlaps other task.\r\n                    angular.forEach(allTasks,function(currentTask){\r\n                        var currentStart,currentEnd;\r\n                        if (currentTask.model.from.isBefore(currentTask.model.to)){\r\n                            currentStart = currentTask.model.from;\r\n                            currentEnd = currentTask.model.to;\r\n                        } else {\r\n                            currentStart = currentTask.model.to;\r\n                            currentEnd = currentTask.model.from;\r\n                        }\r\n                        var currentRange = moment().range(currentStart, currentEnd);\r\n                        angular.forEach(allTasks,function(task){\r\n                            if (currentTask.model.id !== task.model.id){\r\n                                var start,end;\r\n                                if (task.model.from.isBefore(task.model.to)){\r\n                                    start = task.model.from;\r\n                                    end = task.model.to;\r\n                                } else {\r\n                                    start = task.model.to;\r\n                                    end = task.model.from;\r\n                                }\r\n                                var range = moment().range(start, end);\r\n                                if (range.overlaps(currentRange)){\r\n                                    if (!overlapsTasks.hasOwnProperty(task.model.id)) {\r\n                                        newOverlapsTasks[task.model.id] = task;\r\n                                    }\r\n                                    delete removedOverlapsTasks[task.model.id];\r\n                                    if (!overlapsTasks.hasOwnProperty(currentTask.model.id)) {\r\n                                        newOverlapsTasks[currentTask.model.id] = currentTask;\r\n                                    }\r\n                                    delete removedOverlapsTasks[currentTask.model.id];\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n\r\n                    angular.forEach(removedOverlapsTasks, function(task) {\r\n                      if (task.$element){\r\n                        task.$element.removeClass('gantt-task-overlaps');\r\n                      }\r\n                        delete overlapsTasks[task.model.id];\r\n                    });\r\n\r\n                    angular.forEach(newOverlapsTasks, function(task) {\r\n                      if (task.$element){\r\n                        task.$element.addClass('gantt-task-overlaps');\r\n                      }\r\n                        overlapsTasks[task.model.id] = task;\r\n                    });\r\n\r\n                    overlapsTasks = newOverlapsTasks;\r\n                };\r\n            }\r\n        };\r\n    }]);\r\n}());\r\n\r\n","angular.module('gantt.overlap.templates', []).run(['$templateCache', function($templateCache) {\r\n\r\n}]);\r\n"]}