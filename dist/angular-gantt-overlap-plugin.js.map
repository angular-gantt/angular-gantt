{"version":3,"sources":["../src/plugins/overlap.js","../.tmp/generated/plugins/overlap/html2js.js"],"names":[],"mappings":"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","file":"angular-gantt-overlap-plugin.js","sourcesContent":["(function() {\n    'use strict';\n    angular.module('gantt.overlap', ['gantt', 'gantt.overlap.templates']).directive('ganttOverlap', ['moment', '$timeout', function(moment, $timeout) {\n        return {\n            restrict: 'E',\n            require: '^gantt',\n            scope: {\n                enabled: '=?',\n                global: '=?'\n            },\n            link: function(scope, element, attrs, ganttCtrl) {\n                var api = ganttCtrl.gantt.api;\n\n                if (scope.enabled === undefined) {\n                    scope.enabled = true;\n                }\n\n                if (scope.global === undefined) {\n                    scope.global = false;\n                }\n\n                function getStartEnd(task) {\n                    var start, end;\n\n                    if (task.model.from.isBefore(task.model.to)) {\n                        start = task.model.from;\n                        end = task.model.to;\n                    } else {\n                        start = task.model.to;\n                        end = task.model.from;\n                    }\n\n                    return [start, end];\n                }\n\n                function getRange(task) {\n                    var startEnd = getStartEnd(task);\n                    return moment().range(startEnd[0], startEnd[1]);\n                }\n\n                function handleTaskOverlap(overlapsList, task) {\n                    if (!(task.model.id in overlapsList) && task.$element) {\n                        task.$element.addClass('gantt-task-overlaps');\n                        overlapsList[task.model.id] = task;\n                    }\n                }\n\n                function handleTaskNonOverlaps(overlapsList, allTasks) {\n                    for (var i = 0, l = allTasks.length; i < l; i++) {\n                        var task = allTasks[i];\n                        if (!(task.model.id in overlapsList) && task.$element) {\n                            task.$element.removeClass('gantt-task-overlaps');\n                        }\n                    }\n                }\n\n                function handleOverlaps(tasks) {\n                    // Assume that tasks are ordered with from date.\n                    var newOverlapsTasks = {};\n\n                    if (tasks.length > 1) {\n                        var previousTask = tasks[0];\n                        var previousRange = getRange(previousTask);\n\n                        for (var i = 1, l = tasks.length; i < l; i++) {\n                            var task = tasks[i];\n                            var range = getRange(task);\n\n                            if (range.overlaps(previousRange)) {\n                                handleTaskOverlap(newOverlapsTasks, task);\n                                handleTaskOverlap(newOverlapsTasks, previousTask);\n                            }\n\n                            if (previousTask.left + previousTask.width < task.left + task.width) {\n                                previousTask = task;\n                                previousRange = range;\n                            }\n                        }\n                    }\n\n                    handleTaskNonOverlaps(newOverlapsTasks, tasks);\n                }\n\n                function sortOn(array, supplier) {\n                    return array.sort(function(a, b) {\n                        if (supplier(a) < supplier(b)) {\n                            return -1;\n                        } else if (supplier(a) > supplier(b)) {\n                            return 1;\n                        }\n                        return 0;\n                    });\n                }\n\n                function handleGlobalOverlaps(rows) {\n                    var globalTasks = [];\n                    for (var i = 0; i < rows.length; i++) {\n                        globalTasks.push.apply(globalTasks, rows[i].tasks);\n                    }\n\n                    globalTasks = sortOn(globalTasks, function(task) {\n                        return task.model.from;\n                    });\n\n                    handleOverlaps(globalTasks);\n                }\n\n                if (scope.enabled) {\n                    api.data.on.change(scope, function() {\n                        $timeout(function() {\n                            var rows = api.gantt.rowsManager.rows;\n\n                            if (scope.global) {\n                                handleGlobalOverlaps(rows);\n                            } else {\n                                for (var i = 0; i < rows.length; i++) {\n                                    handleOverlaps(rows[i].tasks);\n                                }\n                            }\n                        });\n                    });\n\n                    api.tasks.on.change(scope, function(task) {\n                        if (scope.global) {\n                            var rows = task.row.rowsManager.rows;\n                            handleGlobalOverlaps(rows);\n                        } else {\n                            handleOverlaps(task.row.tasks);\n                        }\n                    });\n\n                    api.tasks.on.rowChange(scope, function(task, oldRow) {\n                        if (scope.global) {\n                            var rows = oldRow.rowsManager.rows;\n                            handleGlobalOverlaps(rows);\n                        } else {\n                            handleOverlaps(oldRow.tasks);\n                        }\n                    });\n\n                    api.tasks.on.add(scope, function(task) {\n                        // TODO: Mimicked functionality from api.data.on.change to defer until element creation, but not ideal.  Refactor necessary to raise 'add' event after task is fully drawn.\n                        $timeout(function() {\n                            if (scope.global) {\n                                var rows = task.row.rowsManager.rows;\n                                handleGlobalOverlaps(rows);\n                            } else {\n                                handleOverlaps(task.row.tasks);\n                            }\n                        });\n                    });\n                }\n            }\n        };\n    }]);\n}());\n","angular.module('gantt.overlap.templates', []).run(['$templateCache', function($templateCache) {\n\n}]);\n"]}